<!DOCTYPE html>
<html lang="en">
  <head>
    <title>README  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="README  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          GraphZahl Docs
        </a>
         (50% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/nerdsupremacist/GraphZahl">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">GraphZahl Reference</a>
      <img class="carat" src="img/carat.png" />
      README  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Guides.html">Guides</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="readme.html">README</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/EmptyRootType.html">EmptyRootType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/LazyInline.html">LazyInline</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/LazyInlineAsInterface.html">LazyInlineAsInterface</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/PageInfo.html">PageInfo</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/IDValue.html">IDValue</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/JSONOptional.html">JSONOptional</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/Output.html">Output</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/Resolution.html">Resolution</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/Resolution/Error.html">– Error</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/Resolution/Context.html">– Context</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/ScalarType.html">ScalarType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/ScalarTypeError.html">ScalarTypeError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/ScalarValue.html">ScalarValue</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Array.html">Array</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Bool.html">Bool</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Context.html">Context</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Context/Key.html">– Key</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/ContextKeyPaths.html">ContextKeyPaths</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Double.html">Double</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/EventLoopFuture.html">EventLoopFuture</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Float.html">Float</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Int.html">Int</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/KeyPath.html">KeyPath</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Optional.html">Optional</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/RawRepresentable.html">RawRepresentable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/String.html">String</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/UUID.html">UUID</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/ConcreteResolvable.html">ConcreteResolvable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/ConnectionProtocol.html">ConnectionProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/ContextBasedConnection.html">ContextBasedConnection</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/DelegatedOutputResolvable.html">DelegatedOutputResolvable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/EdgeProtocol.html">EdgeProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/FixedPageSizeIndexedConnection.html">FixedPageSizeIndexedConnection</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/GraphQLEnum.html">GraphQLEnum</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/GraphQLInputObject.html">GraphQLInputObject</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/GraphQLObject.html">GraphQLObject</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/GraphQLRootType.html">GraphQLRootType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/GraphQLScalar.html">GraphQLScalar</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/GraphQLSchema.html">GraphQLSchema</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/GraphQLUnion.html">GraphQLUnion</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/IndexCursorTranslator.html">IndexCursorTranslator</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/IndexedConnection.html">IndexedConnection</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/InputResolvable.html">InputResolvable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols.html#/s:9GraphZahl15KeyPathListableP">KeyPathListable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols.html#/s:9GraphZahl17MandatoryRootTypeP">MandatoryRootType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/Node.html">Node</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/OutputResolvable.html">OutputResolvable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/Resolvable.html">Resolvable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/ValueResolvable.html">ValueResolvable</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Ignore.html">Ignore</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/Inline.html">Inline</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/InlineAsInterface.html">InlineAsInterface</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/StandardEdge.html">StandardEdge</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/StandardIndexCursorTranslator.html">StandardIndexCursorTranslator</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:9GraphZahl12MutationTypea">MutationType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:9GraphZahl9QueryTypea">QueryType</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <p><img src="https://github.com/nerdsupremacist/GraphZahl/raw/develop/logo.png" alt="low effort logo"></p>
<h1 id='graphzahl-alpha' class='heading'>GraphZahl (Alpha)</h1>

<p><img src="https://github.com/nerdsupremacist/GraphZahl/workflows/Swift/badge.svg" alt="Swift"> <img src="https://github.com/nerdsupremacist/GraphZahl/workflows/Documentation/badge.svg" alt="Documentation"> <a href="https://swiftpackageindex.com/nerdsupremacist/GraphZahl"><img src="https://img.shields.io/endpoint?url=https%3A%2F%2Fswiftpackageindex.com%2Fapi%2Fpackages%2Fnerdsupremacist%2FGraphZahl%2Fbadge%3Ftype%3Dswift-versions" alt=""></a> <a href="https://swiftpackageindex.com/nerdsupremacist/GraphZahl"><img src="https://img.shields.io/endpoint?url=https%3A%2F%2Fswiftpackageindex.com%2Fapi%2Fpackages%2Fnerdsupremacist%2FGraphZahl%2Fbadge%3Ftype%3Dplatforms" alt=""></a></p>

<p>Create the best GraphQL APIs ever using Swift. GraphZahl is a Swift Framework that let&rsquo;s you write your Server the simplest way possible! With a magic, Codable-like API.</p>

<p>Here are the main reasons, why you could like it:</p>

<ul>
<li>📝 Declarative</li>
<li>📦 Compositable and extendable</li>
<li>🔐 Type-Safety</li>
<li>🕓 ZERO Boilerplate</li>
<li>😍 Familiar and Intuitive Codable-like Feel</li>
<li>🤪 Amazing for Quick Prototyping</li>
</ul>
<h2 id='tl-dr' class='heading'>TL;DR?</h2>

<p>Let&rsquo;s cut the chase and write our Hello World! </p>
<pre class="highlight swift"><code><span class="c1">// Create a GraphQLSchema</span>
<span class="kd">enum</span> <span class="kt">HelloWorld</span><span class="p">:</span> <span class="kt">GraphQLSchema</span> <span class="p">{</span>

    <span class="c1">// Describe the Query Type </span>
    <span class="kd">class</span> <span class="kt">Query</span><span class="p">:</span> <span class="kt">QueryType</span> <span class="p">{</span>
        <span class="kd">func</span> <span class="nf">greeting</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">String</span> <span class="p">{</span>
            <span class="k">return</span> <span class="s">"Hello, </span><span class="se">\(</span><span class="n">name</span><span class="se">)</span><span class="s">"</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span>

<span class="c1">// Run a query using .perform</span>
<span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="kt">HelloWorld</span><span class="o">.</span><span class="nf">perform</span><span class="p">(</span><span class="nv">request</span><span class="p">:</span> <span class="s">"..."</span><span class="p">)</span>
</code></pre>

<p>And you can even connect it to GraphiQL and test it:</p>

<p><img src="https://github.com/nerdsupremacist/GraphZahl/raw/develop/demo/helloworld.png" alt="graphiql">
<em>left: a query for data</em> <strong>|</strong> <em>middle: the returned json from our API</em>  <strong>|</strong> <em>right: our server API reference</em></p>

<p><strong>Let&rsquo;s break that down!</strong></p>

<p>Every GraphQL API begins with a root Schema where you define the Query Type and Mutation Type:</p>

<ul>
<li>Query Type (Mandatory): Describes all the read operations that can be done</li>
<li>Mutation Type (Optional): Descripes all the write operations</li>
</ul>

<p>For now we&rsquo;ll focus on the Query Type. 
GraphZahl will now look at any properties and functions that can be served in GraphQL, and will offer those as fields in your API.</p>

<p>In our example this means that it will find the function <code>greeting</code> and see that all the inputs and outputs are availanle as GraphQL Types and register it. Super easy 😍!</p>
<h2 id='installation' class='heading'>Installation</h2>
<h3 id='swift-package-manager' class='heading'>Swift Package Manager</h3>

<p>You can install GraphZahl via <a href="https://swift.org/package-manager/">Swift Package Manager</a> by adding the following line to your <code>Package.swift</code>:</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">PackageDescription</span>

<span class="k">let</span> <span class="nv">package</span> <span class="o">=</span> <span class="kt">Package</span><span class="p">(</span>
    <span class="p">[</span><span class="o">...</span><span class="p">]</span>
    <span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
        <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/nerdsupremacist/GraphZahl.git"</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="s">"0.1.0-alpha."</span><span class="p">)</span>

        <span class="c1">// It is recommended to use GraphZahl alongside Vapor</span>
        <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/nerdsupremacist/graphzahl-vapor-support.git"</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="s">"0.1.0-alpha."</span><span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
</code></pre>
<h2 id='usage' class='heading'>Usage</h2>

<p>Most users of GraphZahl need to understand the six main provided protocols:</p>

<ul>
<li><a href="#graphqlobject---reference">GraphQLObject</a>:  A type that is composed from multiple properties and functions</li>
<li><a href="#graphqlobject---reference">GraphQLSchema</a>:  The root of any API</li>
<li><a href="#graphqlscalar---reference">GraphQLScalar</a>:  A singular value</li>
<li><a href="#graphqlenum----reference">GraphQLEnum</a>: An simple enum that is RawRepresentable with String</li>
<li><a href="#graphqlunion----reference">GraphQLUnion</a>: An enum where every case has an associated value that is a GraphQLObject</li>
<li><a href="#graphqlinputobject---reference">GraphQLInputObject</a>: A struct that you expect as an argument to a funtion</li>
</ul>

<p>As well as the extensions that enable you to get the most of GraphZahl alongside other common server-side libraries like Vapor and Fluent.</p>
<h3 id='graphqlobject-a-href-https-quintero-io-graphzahl-protocols-graphqlobject-html-reference-a' class='heading'>GraphQLObject - <a href="https://quintero.io/GraphZahl/Protocols/GraphQLObject.html">Reference</a></h3>

<p>You can provide any class you want by simply making it implement  <code><a href="Protocols/GraphQLObject.html">GraphQLObject</a></code>. </p>

<p>And voila 😍 !!!! You don&rsquo;t have to implement anything. GraphZahl will do all the magic for you:</p>

<ul>
<li>Every property that is either:
a. a GraphQL Object, 
a. Scalar 
a. Enum
a. or Union</li>
</ul>

<p>will be available via GraphQL. Zero hassle. Crazy!!!</p>

<ul>
<li>Every method where:
a. every input is a Scalar, Enum or Input Object
a. the return type is either:
    a. a GraphQL Object, 
    a. Scalar 
    a. Enum
    a. or Union</li>
</ul>

<p>is now also available! Just like that. Awesome!!!</p>

<p><strong>Note:</strong> when it comes to GraphQL Types GraphZahl also supports Optionals, Arrays and Futures out of the box, thanks to Conditional Conformance.</p>

<p><strong>Let&rsquo;s try it:</strong></p>

<p>We define our class. With some properties and methods:</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">MyObject</span><span class="p">:</span> <span class="kt">GraphQLObject</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">greeting</span> <span class="o">=</span> <span class="s">"Hello World!"</span>
    <span class="k">let</span> <span class="nv">favouriteNumber</span> <span class="o">=</span> <span class="mi">42</span>

    <span class="kd">func</span> <span class="nf">count</span><span class="p">(</span><span class="n">to</span> <span class="nv">number</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">String</span> <span class="p">{</span>
        <span class="nf">return</span> <span class="p">(</span><span class="mi">0</span><span class="o">..&lt;</span><span class="n">number</span><span class="p">)</span><span class="o">.</span><span class="nf">map</span><span class="p">(</span><span class="kt">String</span><span class="o">.</span><span class="kd">init</span><span class="p">)</span><span class="o">.</span><span class="nf">joined</span><span class="p">(</span><span class="nv">separator</span><span class="p">:</span> <span class="s">", "</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>And we can see it appear in our API:</p>

<p><img src="https://github.com/nerdsupremacist/GraphZahl/raw/develop/demo/object.png" alt="">
<em>left: a query for the data of MyObject</em>  <strong>|</strong> <em>middle: the returned json from our API</em>  <strong>|</strong> <em>right: the type definition of MyObject</em></p>

<p>Your object can also return nested objects:</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">OtherObject</span><span class="p">:</span> <span class="kt">GraphQLObject</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">number</span><span class="p">:</span> <span class="kt">Int</span>

    <span class="nf">init</span><span class="p">(</span><span class="nv">number</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">number</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="kt">MyObject</span><span class="p">:</span> <span class="kt">GraphQLObject</span> <span class="p">{</span>
    <span class="o">...</span>

    <span class="k">let</span> <span class="nv">other</span> <span class="o">=</span> <span class="kt">OtherObject</span><span class="p">(</span><span class="nv">number</span><span class="p">:</span> <span class="mi">1337</span><span class="p">)</span>
    <span class="k">let</span> <span class="nv">others</span> <span class="o">=</span> <span class="p">[</span><span class="kt">OtherObject</span><span class="p">(</span><span class="nv">number</span><span class="p">:</span> <span class="mi">0</span><span class="p">),</span> <span class="kt">OtherObject</span><span class="p">(</span><span class="nv">number</span><span class="p">:</span> <span class="mi">1</span><span class="p">)]</span> <span class="c1">// Arrays also work</span>
<span class="p">}</span>
</code></pre>

<p>And you can see the results immediately:</p>

<p><img src="https://github.com/nerdsupremacist/GraphZahl/raw/develop/demo/nestedobject.png" alt=""></p>
<h3 id='graphqlschema-a-href-https-quintero-io-graphzahl-protocols-graphqlschema-html-reference-a' class='heading'>GraphQLSchema - <a href="https://quintero.io/GraphZahl/Protocols/GraphQLSchema.html">Reference</a></h3>

<p>A Schema is basically the namespace where you define two objects: A Query and a Mutation Type.
The query and mutation behave like regular <code><a href="Protocols/GraphQLObject.html">GraphQLObject</a></code>s. All the features mentioned above will be included out of the box.</p>

<p>The QueryType is mandatory and always has to be defined! If your API doesn&rsquo;t need Mutations, then you&rsquo;re done.</p>

<p><strong>What if you want to make data user dependent?</strong></p>

<p>That&rsquo;s why Query and Mutation Types come with an extra constraint (for simplicity this was omitted in the snippets before).
They have what we call an associated <code>ViewerContext</code> and need an initializer with that ViewerContext. 
<em>Note: the ViewerContext of the Query and the Mutation have to Match.</em></p>

<p>For example a Todo App might look like this:</p>
<pre class="highlight swift"><code><span class="kd">enum</span> <span class="kt">TodoApp</span><span class="p">:</span> <span class="kt">GraphQLSchema</span> <span class="p">{</span>
    <span class="kd">typealias</span> <span class="kt">ViewerContext</span> <span class="o">=</span> <span class="kt">LoggedInUser</span><span class="p">?</span>

    <span class="kd">class</span> <span class="kt">Query</span><span class="p">:</span> <span class="kt">QueryType</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">user</span><span class="p">:</span> <span class="kt">LoggedInUser</span><span class="p">?</span>

        <span class="kd">func</span> <span class="nf">myTodos</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">Todo</span><span class="p">]?</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">user</span><span class="p">?</span><span class="o">.</span><span class="nf">todosFromDB</span><span class="p">()</span>
        <span class="p">}</span>

        <span class="kd">required</span> <span class="nf">init</span><span class="p">(</span><span class="n">viewerContext</span> <span class="nv">user</span><span class="p">:</span> <span class="kt">LoggedInUser</span><span class="p">?)</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">user</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">class</span> <span class="kt">Mutation</span><span class="p">:</span> <span class="kt">MutationType</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">user</span><span class="p">:</span> <span class="kt">LoggedInUser</span><span class="p">?</span>

        <span class="kd">func</span> <span class="nf">deleteTodo</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="kt">UUID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Todo</span><span class="p">?</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">user</span><span class="p">?</span><span class="o">.</span><span class="n">todos</span><span class="o">.</span><span class="nf">find</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="nf">delete</span><span class="p">()</span>
        <span class="p">}</span>

        <span class="kd">required</span> <span class="nf">init</span><span class="p">(</span><span class="n">viewerContext</span> <span class="nv">user</span><span class="p">:</span> <span class="kt">LoggedInUser</span><span class="p">?)</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">user</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>If you don&rsquo;t need a Viewer Context just set it to <code>Void</code>:</p>
<pre class="highlight swift"><code><span class="kd">enum</span> <span class="kt">HelloWorld</span><span class="p">:</span> <span class="kt">GraphQLSchema</span> <span class="p">{</span>
    <span class="kd">typealias</span> <span class="kt">ViewerContext</span> <span class="o">=</span> <span class="kt">Void</span>

    <span class="kd">class</span> <span class="kt">Query</span><span class="p">:</span> <span class="kt">QueryType</span> <span class="p">{</span>
        <span class="kd">func</span> <span class="nf">greeting</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">String</span> <span class="p">{</span>
            <span class="k">return</span> <span class="s">"Hello, </span><span class="se">\(</span><span class="n">name</span><span class="se">)</span><span class="s">"</span>
        <span class="p">}</span>

        <span class="kd">required</span> <span class="nf">init</span><span class="p">(</span><span class="nv">viewerContext</span><span class="p">:</span> <span class="kt">Void</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='graphqlscalar-a-href-https-quintero-io-graphzahl-protocols-graphqlscalar-html-reference-a' class='heading'>GraphQLScalar - <a href="https://quintero.io/GraphZahl/Protocols/GraphQLScalar.html">Reference</a></h3>

<p>If you have a value that can be represented as a standard Scalar Value, you can return that value as well, with the added Type Safety benefit, of not mixing it with the standard types. </p>

<p>To implement a <code><a href="Protocols/GraphQLScalar.html">GraphQLScalar</a></code> you need to be able to encode and decode it as a <code><a href="Enums/ScalarValue.html">ScalarValue</a></code> (String, Number, Bool)   </p>

<p>For example if you want to return URLs you can implement it in an extension:</p>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">URL</span><span class="p">:</span> <span class="kt">GraphQLScalar</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="nf">init</span><span class="p">(</span><span class="nv">scalar</span><span class="p">:</span> <span class="kt">ScalarValue</span><span class="p">)</span> <span class="k">throws</span> <span class="p">{</span>
        <span class="c1">// attempt to read a string and read a url from it</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="k">try</span> <span class="n">scalar</span><span class="o">.</span><span class="nf">string</span><span class="p">())</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="o">...</span>
        <span class="p">}</span>
        <span class="k">self</span> <span class="o">=</span> <span class="n">url</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">func</span> <span class="nf">encodeScalar</span><span class="p">()</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="kt">ScalarValue</span> <span class="p">{</span>
        <span class="c1">// delegate encoding to absolute string</span>
        <span class="k">return</span> <span class="k">try</span> <span class="n">absoluteString</span><span class="o">.</span><span class="nf">encodeScalar</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>And presto! Every time a URL comes up in an Object, it will be made available:</p>
<pre class="highlight swift"><code><span class="kd">enum</span> <span class="kt">HelloWorld</span><span class="p">:</span> <span class="kt">GraphQLSchema</span> <span class="p">{</span>
    <span class="kd">class</span> <span class="kt">Query</span><span class="p">:</span> <span class="kt">QueryType</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"https://github.com/nerdsupremacist/GraphZahl"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p><img src="https://github.com/nerdsupremacist/GraphZahl/raw/develop/demo/urlscalar.png" alt=""></p>

<p>You can do this with virtually all kinds of types: Dates in the format of your choice, Percentages, HTML Text, whatever you want.</p>
<h3 id='graphqlenum-a-href-https-quintero-io-graphzahl-protocols-graphqlenum-html-reference-a' class='heading'>GraphQLEnum  - <a href="https://quintero.io/GraphZahl/Protocols/GraphQLEnum.html">Reference</a></h3>

<p>The last one is the simplest case. If you want to support an enum in your API, it has to be RawRepresentable with String and implement <code><a href="Protocols/GraphQLEnum.html">GraphQLEnum</a></code>.</p>

<p>If your enum is <code>CaseIterable</code> that&rsquo;s it!</p>
<pre class="highlight swift"><code><span class="kd">enum</span> <span class="kt">Envirornment</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="kt">CaseIterable</span><span class="p">,</span> <span class="kt">GraphQLEnum</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">production</span>
    <span class="k">case</span> <span class="n">development</span>
    <span class="k">case</span> <span class="n">testing</span>
<span class="p">}</span>
</code></pre>

<p>If you want to compute your Enum Cases yourself you can implement the <code>cases</code> function.</p>
<h3 id='graphqlunion-a-href-https-quintero-io-graphzahl-protocols-graphqlunion-html-reference-a' class='heading'>GraphQLUnion  - <a href="https://quintero.io/GraphZahl/Protocols/GraphQLUnion.html">Reference</a></h3>

<p>GraphZahl supports Union Types. To implement a Union Type you just have to implement an enum where every case has an associated type that is an Object</p>
<pre class="highlight swift"><code><span class="kd">enum</span> <span class="kt">SearchResult</span><span class="p">:</span> <span class="kt">GraphQLUnion</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nf">user</span><span class="p">(</span><span class="kt">User</span><span class="p">)</span>
    <span class="k">case</span> <span class="nf">page</span><span class="p">(</span><span class="kt">Page</span><span class="p">)</span>
    <span class="k">case</span> <span class="nf">group</span><span class="p">(</span><span class="kt">Group</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="kt">Query</span><span class="p">:</span> <span class="kt">QueryType</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">search</span><span class="p">(</span><span class="nv">term</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">SearchResult</span><span class="p">]</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="o">.</span><span class="nf">user</span><span class="p">(</span><span class="n">user</span><span class="p">),</span>
            <span class="o">.</span><span class="nf">page</span><span class="p">(</span><span class="n">page</span><span class="p">),</span>
            <span class="o">.</span><span class="nf">group</span><span class="p">(</span><span class="n">group</span><span class="p">),</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='graphqlinputobject-a-href-https-quintero-io-graphzahl-protocols-graphqlinputobject-html-reference-a' class='heading'>GraphQLInputObject - <a href="https://quintero.io/GraphZahl/Protocols/GraphQLInputObject.html">Reference</a></h3>

<p>If you want to take specific structs as arguments for functions you can make them conform to <code><a href="Protocols/GraphQLInputObject.html">GraphQLInputObject</a></code></p>
<pre class="highlight swift"><code><span class="kd">enum</span> <span class="kt">Order</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="kt">CaseIterable</span><span class="p">,</span> <span class="kt">GraphQLEnum</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">ascending</span>
    <span class="k">case</span> <span class="n">descending</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">Options</span><span class="p">:</span> <span class="kt">GraphQLInputObject</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">safeSearch</span><span class="p">:</span> <span class="kt">Bool</span>
    <span class="k">let</span> <span class="nv">order</span><span class="p">:</span> <span class="kt">Order</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="kt">Query</span><span class="p">:</span> <span class="kt">QueryType</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">search</span><span class="p">(</span><span class="nv">term</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span>
                <span class="nv">arguments</span><span class="p">:</span> <span class="kt">Options</span> <span class="o">=</span> <span class="kt">Options</span><span class="p">(</span><span class="nv">safeSearch</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nv">order</span><span class="p">:</span> <span class="o">.</span><span class="n">ascending</span><span class="p">))</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">SearchResult</span><span class="p">]</span> <span class="p">{</span>

        <span class="k">return</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='subclassing-support' class='heading'>Subclassing Support</h3>

<p>GraphZahl supports subclassing, but due to Subclassing not being available in GraphQL, it is abstracted as an extra Interface.</p>

<p>For example:</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">A</span><span class="p">:</span> <span class="kt">GraphQLObject</span> <span class="p">{</span>
    <span class="o">...</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="kt">B</span><span class="p">:</span> <span class="kt">A</span> <span class="p">{</span>
    <span class="o">...</span>
<span class="p">}</span>
</code></pre>

<p>will be represented as the interface <code>A</code> and the concrete types <code>__A</code> and <code>B</code>:</p>
<pre class="highlight plaintext"><code>// Interface that displays the output of any A
interface A {
    ...
}

// An instance of the superclass A
type __A implements A {
    ...
}

// An instance of the subclass B
type B implements A {
    ...
}
</code></pre>
<h3 id='keypath-support' class='heading'>KeyPath Support</h3>

<p>If you take KeyPaths as an argument of a function, GraphZahl will create an enum mapping to all the properties with the same type.</p>

<p>For example:</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">SearchResult</span><span class="p">:</span> <span class="kt">GraphQLObject</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">relevance</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">let</span> <span class="nv">popularity</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">let</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="kt">Schema</span><span class="p">:</span> <span class="kt">GraphQLSchema</span> <span class="p">{</span>
    <span class="kd">class</span> <span class="kt">Query</span><span class="p">:</span> <span class="kt">QueryType</span> <span class="p">{</span>
        <span class="kd">func</span> <span class="nf">search</span><span class="p">(</span><span class="nv">term</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span>
                    <span class="nv">sortBy</span><span class="p">:</span> <span class="kt">KeyPath</span><span class="o">&lt;</span><span class="kt">SearchResult</span><span class="p">,</span> <span class="kt">Int</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">SearchResult</span><span class="p">]</span> <span class="p">{</span>

            <span class="k">return</span> <span class="p">[</span><span class="kt">SearchResult</span><span class="p">]()</span><span class="o">.</span><span class="n">sort</span> <span class="p">{</span> <span class="nv">$0</span><span class="p">[</span><span class="nv">keyPath</span><span class="p">:</span> <span class="n">sortBy</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nv">$1</span><span class="p">[</span><span class="nv">keyPath</span><span class="p">:</span> <span class="n">sortBy</span><span class="p">]</span> <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>And the outputed definition is:</p>
<pre class="highlight plaintext"><code>type Query {
  search(sortBy: SearchResultField!, term: String!): [SearchResult!]!
}

type SearchResult {
  name: String!
  popularity: Int!
  relevance: Int!
}

enum SearchResultField {
  Relevance
  Popularity
}
</code></pre>
<h2 id='extensions-and-plugins' class='heading'>Extensions and Plugins</h2>

<p>There&rsquo;s also some extensions on top of GraphZahl to add support for different scenarios that are not necessarily the norm:</p>
<h3 id='vapor-support-recommended' class='heading'>Vapor Support (Recommended)</h3>

<p>To serve your API via Vapor, you can use <a href="https://github.com/nerdsupremacist/graphzahl-vapor-support">graphzahl-vapor-support</a>:</p>
<pre class="highlight swift"><code><span class="kd">enum</span> <span class="kt">HelloWorld</span><span class="p">:</span> <span class="kt">GraphQLSchema</span> <span class="p">{</span>
    <span class="kd">class</span> <span class="kt">Query</span><span class="p">:</span> <span class="kt">QueryType</span> <span class="p">{</span>
        <span class="kd">func</span> <span class="nf">greeting</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">String</span> <span class="p">{</span>
            <span class="k">return</span> <span class="s">"Hello, </span><span class="se">\(</span><span class="n">name</span><span class="se">)</span><span class="s">"</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Add the API to the Routes of your Vapor App</span>
<span class="n">app</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="nf">graphql</span><span class="p">(</span><span class="nv">path</span><span class="p">:</span> <span class="s">"api"</span><span class="p">,</span> <span class="s">"graphql"</span><span class="p">,</span> <span class="nv">use</span><span class="p">:</span> <span class="kt">HelloWorld</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>
</code></pre>

<p>And you can even add GraphiQL:</p>
<pre class="highlight swift"><code><span class="n">app</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="nf">graphql</span><span class="p">(</span><span class="nv">path</span><span class="p">:</span> <span class="s">"api"</span><span class="p">,</span> <span class="s">"graphql"</span><span class="p">,</span> <span class="nv">use</span><span class="p">:</span> <span class="kt">HelloWorld</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">includeGraphiQL</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
</code></pre>
<h3 id='fluent-support' class='heading'>Fluent Support</h3>

<p>To use Fluent Types and Models in your API, you can use <a href="https://github.com/nerdsupremacist/graphzahl-fluent-support">graphzahl-fluent-support</a>:</p>
<pre class="highlight swift"><code><span class="kd">enum</span> <span class="kt">API</span><span class="p">:</span> <span class="kt">GraphQLSchema</span> <span class="p">{</span>
    <span class="kd">typealias</span> <span class="kt">ViewerContext</span> <span class="o">=</span> <span class="kt">Database</span>

    <span class="kd">class</span> <span class="kt">Query</span><span class="p">:</span> <span class="kt">QueryType</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">database</span><span class="p">:</span> <span class="kt">Database</span>

        <span class="c1">// QueryBuilders are supported with additional paging API</span>
        <span class="kd">func</span> <span class="nf">todos</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">QueryBuilder</span><span class="o">&lt;</span><span class="kt">Todo</span><span class="o">&gt;</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kt">Todo</span><span class="o">.</span><span class="nf">query</span><span class="p">(</span><span class="nv">on</span><span class="p">:</span> <span class="n">database</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="kd">required</span> <span class="nf">init</span><span class="p">(</span><span class="n">viewerContext</span> <span class="nv">database</span><span class="p">:</span> <span class="kt">Database</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">database</span> <span class="o">=</span> <span class="n">database</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">...</span>
<span class="p">}</span>
</code></pre>

<p>It adds support for:</p>

<ul>
<li>QueryBuilder<T></li>
<li>@Parent</li>
<li>@Children</li>
<li>@Siblings</li>
<li>@Field</li>
<li>@ID</li>
</ul>
<h2 id='deploy' class='heading'>Deploy</h2>
<h3 id='heroku' class='heading'>Heroku</h3>

<p>If you&rsquo;re deploying to Heroku, it&rsquo;s super simple. You&rsquo;ll need 2 things:</p>

<p><em>1. Add the build pack</em></p>

<p>Add the build pack to heroku:</p>
<pre class="highlight shell"><code>heroku buildpacks:set nerdsupremacist/graph-zahl
</code></pre>

<p><em>2. Add a Procfile</em></p>

<p>In our Repo we will add a Procfile that will tell Heroku the starting point of our app:</p>

<p>For example, where the Target of our API is called <code>MyServer</code> and is using Vapor:</p>
<pre class="highlight plaintext"><code>web: MyServer serve --env production --hostname 0.0.0.0 --port $PORT
</code></pre>

<p>You can also take some inspiration from the Deployment documentation for <a href="https://docs.vapor.codes/3.0/deploy/heroku/">Vapor</a>.</p>
<h3 id='building-for-linux' class='heading'>Building for Linux</h3>

<p>If you&rsquo;re building a GraphZahl app for Linux, you&rsquo;ll need to add <code>-E</code> linker flag. For example:</p>
<pre class="highlight shell"><code>swift build -Xlinker -E <span class="o">{</span>OTHER_FLAGS<span class="o">}</span> -c debug
</code></pre>
<h2 id='known-issues' class='heading'>Known Issues</h2>

<ul>
<li>Due to issues with combinatorics the amount of arguments for a method has been limited</li>
<li>Calling methods hasn&rsquo;t been tested against every argument and return type combination possible. If you encounter any crashes or failures, please open an issue</li>
</ul>
<h2 id='contributions' class='heading'>Contributions</h2>

<p>Contributions are welcome and encouraged!</p>
<h2 id='related-work' class='heading'>Related Work</h2>

<p><img src="https://github.com/nerdsupremacist/Graphaello/raw/develop/logo.png" alt=""></p>

<p>GraphZahl works best when coupled with <a href="https://github.com/nerdsupremacist/Graphaello">Graphaello</a> on the Client Side. Graphaello enables you to use GraphQL directly from your SwiftUI Views.</p>
<h2 id='learn' class='heading'>Learn</h2>

<p>GraphZahl is named after Count von Count from Sesame Street but in German &ldquo;Graf Zahl&rdquo;.</p>

<p>GraphZahl uses <a href="https://github.com/GraphQLSwift/GraphQL">GraphQLSwift</a>, <a href="https://github.com/wickwirew/Runtime">Runtime</a> and <a href="https://www.github.com/apple/swift-nio">Swift NIO</a> under the Hood.
If you are looking for an alternative check out <a href="https://github.com/GraphQLSwift/Graphiti">Graphiti</a>, which is more verbose and complex to use, but offers you more control and better performance.</p>

<p>This is currenlty a research project. More details about how it works, will be published later.
This was very difficult to build, so trust me, I really want to talk in detail about it&hellip; ;)</p>
<h2 id='license' class='heading'>License</h2>

<p>GraphZahl is available under the MIT license. See the LICENSE file for more info.</p>

<p>This project is being done under the supervision of the Chair for Applied Software Enginnering at the Technical University of Munich. The chair has everlasting rights to use and maintain this tool.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2021 <a class="link" href="https://github.com/nerdsupremacist" target="_blank" rel="external">Mathias Quintero</a>. All rights reserved. (Last updated: 2021-05-17)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.7</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
